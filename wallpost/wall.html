<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ... ‡πÉ‡∏™‡πà‡∏û‡∏ß‡∏Å Font ... -->
</head>
    <body class="bg-gray-800 min-h-screen text-gray-800 relative overflow-x-hidden">
    <div class="fixed inset-0 opacity-10 pointer-events-none" style="
        background-image: radial-gradient(#ffffff 2px, transparent 2px);
        background-size: 30px 30px;
      "></div>

    <!-- === LOADING OVERLAY (‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å/‡∏£‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å Google) === -->
    <div id="authLoading" class="fixed inset-0 z-[60] flex flex-col items-center justify-center bg-gray-900 text-white">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400 mb-4"></div>
        <p class="text-xl animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏ô...</p>
    </div>

    <!-- === LOGIN SCREEN (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô class="hidden") === -->
    <div id="loginScreen"
        class="hidden fixed inset-0 z-50 flex flex-col items-center justify-center bg-gray-900/95 backdrop-blur-sm transition-opacity duration-500">
        <h1 class="text-5xl font-bold text-white mb-8 drop-shadow-lg">
            üîí ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        </h1>
        <button onclick="signInWithGoogle()"
            class="bg-white hover:bg-gray-100 text-gray-800 font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition flex items-center gap-3 text-xl">
            <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-8 h-8" alt="Google Logo" />
            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
        </button>
        <p class="text-gray-400 mt-4">‡∏ï‡πâ‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÅ‡∏≠‡∏ö‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÉ‡∏à‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏∞</p>
    </div>

    <!-- === APP CONTENT (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô) === -->
    <div id="appContent" class="hidden opacity-0 transition-opacity duration-500">
        <!-- HEADER & USER PROFILE -->
        <header class="text-center py-8 relative z-10">
            <!-- ‡∏õ‡∏∏‡πà‡∏° Logout ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤ (‡πÄ‡∏û‡∏¥‡πà‡∏° z-50 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ) -->
            <div
                class="absolute top-4 right-4 flex items-center gap-3 bg-gray-900/50 p-2 rounded-full backdrop-blur-sm border border-white/10 z-50">
                <div class="text-right hidden md:block pl-2">
                    <p id="userDisplayName" class="text-white font-bold text-sm leading-tight"></p>
                    <p id="userEmailDisplay" class="text-gray-300 text-[10px] leading-tight"></p>
                </div>
                <img id="userAvatar" src="" class="w-8 h-8 rounded-full border border-white shadow-sm bg-gray-600" />
                <button onclick="logout()"
                    class="bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1.5 px-3 rounded-full shadow transition ml-1 cursor-pointer">
                    ‡∏≠‡∏≠‡∏Å
                </button>
            </div>

            <h1 class="text-4xl md:text-6xl font-bold text-white drop-shadow-lg transform -rotate-2 relative z-0">
                üì¢ ‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÉ‡∏à
            </h1>
            <p class="text-gray-300 mt-2 text-lg relative z-0">
                ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Google (‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏°‡∏•‡πå‡∏ô‡∏∞‡∏à‡πä‡∏∞) ü§≠
            </p>
        </header>

        <!-- INPUT ZONE -->
        <div class="max-w-xl mx-auto px-4 mb-10 relative z-10">
            <div class="bg-white/10 backdrop-blur-md p-6 rounded-2xl shadow-xl border border-white/20">
                <textarea id="messageInput" rows="3"
                    class="w-full p-4 rounded-xl bg-white/90 focus:outline-none focus:ring-4 focus:ring-yellow-300 text-lg placeholder-gray-400 shadow-inner resize-none"
                    placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ... ‡∏ö‡πà‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏ô‡∏≤‡∏¢, ‡∏ö‡∏≠‡∏Å‡∏£‡∏±‡∏Å‡πÅ‡∏ü‡∏ô, ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏¥‡∏ß‡∏Ç‡πâ‡∏≤‡∏ß?"></textarea>

                <div class="flex justify-between items-center mt-4">
                    <div class="flex gap-2">
                        <button onclick="selectColor('yellow')"
                            class="w-8 h-8 rounded-full bg-yellow-300 ring-2 ring-white hover:scale-110 transition color-btn ring-offset-2 ring-offset-gray-800"></button>
                        <button onclick="selectColor('pink')"
                            class="w-8 h-8 rounded-full bg-pink-300 ring-transparent hover:ring-2 ring-white hover:scale-110 transition color-btn"></button>
                        <button onclick="selectColor('blue')"
                            class="w-8 h-8 rounded-full bg-sky-300 ring-transparent hover:ring-2 ring-white hover:scale-110 transition color-btn"></button>
                        <button onclick="selectColor('green')"
                            class="w-8 h-8 rounded-full bg-green-300 ring-transparent hover:ring-2 ring-white hover:scale-110 transition color-btn"></button>
                    </div>
                    <button onclick="postConfession()"
                        class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-2 px-6 rounded-full shadow-lg transform active:scale-95 transition flex items-center gap-2">
                        ‡πÅ‡∏õ‡∏∞‡πÄ‡∏•‡∏¢! üìå
                    </button>
                </div>
            </div>
        </div>

        <!-- WALL ZONE -->
        <main class="max-w-7xl mx-auto px-4 pb-20 relative z-0">
            <div id="wallContainer"
                class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 auto-rows-max">
                <div id="loading" class="col-span-full text-center text-white py-10 animate-pulse">
                    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÉ‡∏à...
                </div>
            </div>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
        // ... import Firestore ...

        // ... ‡πÉ‡∏™‡πà Firebase Config ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏£‡∏Å) ...
        const firebaseConfig = { ... }; 

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // ‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // ‡∏ú‡πà‡∏≤‡∏ô! ‡∏£‡∏±‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (startApp) ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
                console.log("Welcome", user.displayName);
                startApp(user); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            } else {
                // ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô! ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô!");
                window.location.href = "index.html";
            }
        });

        window.logout = async () => {
            await signOut(auth);
            window.location.href = "index.html"; // ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
        }
        
        // ... ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô startApp(), postConfession() ‡∏Ø‡∏•‡∏Ø ...
    </script>
</body>
</html>
